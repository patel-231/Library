<!DOCTYPE html>
<html>
<head>
<title>Library Management</title>
<style>
    body { font-family: Arial; background:#f2f2f2; padding: 20px; }
    .hidden { display: none; }
    h2 { margin-top: 30px; }
    .btn {
        padding: 8px 15px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        margin: 5px 0;
    }
    .btn-red { background: red; }
    .container {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 8px rgba(0,0,0,0.2);
        margin-bottom: 20px;
    }
    #loginBox {
        background: white;
        width: 280px;
        padding: 20px;
        border-radius: 10px;
        position: fixed;
        top: 30%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    input, select {
        padding: 8px;
        width: 90%;
        margin: 5px 0;
        border-radius: 5px;
        border: 1px solid #aaa;
    }
    table { width: 100%; background: white; border-collapse: collapse; margin-top: 15px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
</style>
</head>
<body>

<h1>üìö Library Book Management System</h1>

<button class="btn" onclick="showLogin()">üîê Developer Mode</button>
<button class="btn" onclick="switchToUser()">üë§ User Mode</button>

<hr>

<!-- USER UI -->
<div id="userUI" class="container">
    <h2>User Mode</h2>
    <input type="text" id="searchUser" placeholder="Search book by name..." onkeyup="renderUserBooks()">
    <table id="userBookTable"></table>
</div>

<!-- DEV UI -->
<div id="devUI" class="hidden container">
    <h2>Developer Mode</h2>

    <h3>Add Book</h3>
    <input id="bookName" placeholder="Book name">
    <select id="bookShelf"></select>
    <button class="btn" onclick="addBook()">Add Book</button>

    <h3>Delete Book</h3>
    <select id="deleteBookList"></select>
    <button class="btn btn-red" onclick="deleteBook()">Delete</button>

    <h3>Move Book</h3>
    <select id="moveBookList"></select>
    <select id="moveBookShelf"></select>
    <button class="btn" onclick="moveBook()">Move</button>

    <h3>Add New Shelf</h3>
    <input id="newShelfName" placeholder="Shelf name">
    <button class="btn" onclick="addShelf()">Add Shelf</button>

    <h3>All Books</h3>
    <table id="devBookTable"></table>

    <button class="btn-red" onclick="logoutDev()">Logout Developer Mode</button>
</div>

<!-- LOGIN POPUP -->
<div id="loginBox" class="hidden">
    <h3>Developer Login</h3>
    <input type="password" id="devPass" placeholder="Enter password">
    <button class="btn" onclick="checkDevLogin()">Login</button>
    <button class="btn-red" onclick="hideLogin()">Cancel</button>
</div>

<script>
/*--------------------------------------------------
    DATA STORAGE
---------------------------------------------------*/
let DEV_PASSWORD = "12345";  
let devMode = false;

let shelves = ["Shelf A", "Shelf B", "Shelf C"];

let books = [
    { name: "Book One", shelf: "Shelf A" },
    { name: "Book Two", shelf: "Shelf B" }
];

/*--------------------------------------------------
    LOGIN FUNCTIONS
---------------------------------------------------*/
function showLogin() { document.getElementById("loginBox").classList.remove("hidden"); }
function hideLogin() { document.getElementById("loginBox").classList.add("hidden"); }

function checkDevLogin() {
    let pass = document.getElementById("devPass").value;
    if (pass === DEV_PASSWORD) {
        devMode = true;
        hideLogin();
        switchToDev();
    } else {
        alert("‚ùå Wrong password");
    }
}

function logoutDev() {
    devMode = false;
    switchToUser();
}

/*--------------------------------------------------
    SWITCH UI
---------------------------------------------------*/
function switchToUser() {
    document.getElementById("userUI").classList.remove("hidden");
    document.getElementById("devUI").classList.add("hidden");
    renderUserBooks();
}

function switchToDev() {
    document.getElementById("userUI").classList.add("hidden");
    document.getElementById("devUI").classList.remove("hidden");
    refreshDevUI();
}

/*--------------------------------------------------
    DEV PANEL LOGIC
---------------------------------------------------*/
function refreshDevUI() {
    updateShelfDropdowns();
    updateBookLists();
    renderDevBooks();
}

function updateShelfDropdowns() {
    let shelfSelects = [document.getElementById("bookShelf"), document.getElementById("moveBookShelf")];
    shelfSelects.forEach(sel => {
        sel.innerHTML = "";
        shelves.forEach(s => {
            sel.innerHTML += `<option value="${s}">${s}</option>`;
        });
    });
}

function updateBookLists() {
    let delSel = document.getElementById("deleteBookList");
    let moveSel = document.getElementById("moveBookList");

    delSel.innerHTML = "";
    moveSel.innerHTML = "";

    books.forEach((b, i) => {
        delSel.innerHTML += `<option value="${i}">${b.name}</option>`;
        moveSel.innerHTML += `<option value="${i}">${b.name}</option>`;
    });
}

/*--------------------------------------------------
    BOOK OPERATIONS
---------------------------------------------------*/
function addBook() {
    let name = document.getElementById("bookName").value;
    let shelf = document.getElementById("bookShelf").value;

    if (!name) return alert("Enter book name");

    books.push({ name, shelf });
    alert("Book added!");
    refreshDevUI();
}

function deleteBook() {
    let index = document.getElementById("deleteBookList").value;
    books.splice(index, 1);
    alert("Book deleted!");
    refreshDevUI();
}

function moveBook() {
    let index = document.getElementById("moveBookList").value;
    let newShelf = document.getElementById("moveBookShelf").value;

    books[index].shelf = newShelf;
    alert("Book moved!");
    refreshDevUI();
}

function addShelf() {
    let name = document.getElementById("newShelfName").value;
    if (!name) return alert("Enter shelf name");

    shelves.push(name);
    alert("Shelf added!");
    refreshDevUI();
}

/*--------------------------------------------------
    TABLE RENDERING
---------------------------------------------------*/
function renderDevBooks() {
    let table = document.getElementById("devBookTable");
    table.innerHTML = `
        <tr><th>Book Name</th><th>Shelf</th></tr>
    `;
    books.forEach(b => {
        table.innerHTML += `<tr><td>${b.name}</td><td>${b.shelf}</td></tr>`;
    });
}

function renderUserBooks() {
    let table = document.getElementById("userBookTable");
    let search = document.getElementById("searchUser").value.toLowerCase();

    table.innerHTML = `<tr><th>Name</th><th>Shelf</th></tr>`;

    books.filter(b => b.name.toLowerCase().includes(search))
         .forEach(b => {
        table.innerHTML += `<tr><td>${b.name}</td><td>${b.shelf}</td></tr>`;
    });
}

/* INITIAL LOAD */
renderUserBooks();
</script>

</body>
</html>
